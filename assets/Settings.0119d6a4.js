import{r as o,j as e,a as r,C as h,F as x,N as b,c as m}from"./index.fb4e2f0a.js";import{I as N,T as p}from"./TemporalNotification.7a4a5d37.js";import{D as S}from"./DropDownBtn.1aeb075d.js";function w(t){const a=o.exports.useRef(null),s=o.exports.useRef(null);function c(){var n;(n=s.current)==null||n.classList.add("anim-line-down"),setTimeout(()=>{t.closePanel()},600)}return e("div",{className:"backdrop",ref:a,onClick:c,children:r("div",{className:"form-grid",ref:s,children:[e("div",{className:"form-container",onClick:n=>n.stopPropagation(),children:t.children}),e("div",{className:"close-btn-x",onClick:c})]})})}function v(t){var s;const a=o.exports.useContext(h);return r("fieldset",{className:"categories-group",children:[e("legend",{children:(s=t.title)!=null?s:"Current categories"}),e("div",{className:"categories-flex",children:a.getCategories().map((c,n)=>e("div",{children:c},n))})]})}function T(){const t=o.exports.useRef(),a=o.exports.useContext(h),[s,c]=o.exports.useState(),[n,i]=o.exports.useState(!1);function d(u){u.preventDefault();const l=t.current.value.trim();l.length>0&&a.addCategory(l)&&(t.current.value="",c(r(p,{hideMessage:()=>c(void 0),durationSeconds:1,children:["Category added"," "]})))}return r(x,{children:[s,r("form",{onSubmit:d,className:"form-display-flex",children:[e("h2",{className:"txt-center",style:{margin:"5px"},children:"Add a new category"}),e(N,{text:"New category name",customText:"The category must be unique and between 3 and 30 characters !",ref:t,minLength:3,maxLength:31,onChangeHandler:u=>{i(u.length>=3)}}),e(v,{}),e("button",{type:"submit",className:"btn-green",disabled:!n,children:"Save"})]})]})}function R(){var d;const t=o.exports.useRef(),a=o.exports.useContext(h),s=o.exports.useContext(b),[c,n]=o.exports.useState();o.exports.useLayoutEffect(()=>{t.current.blockCategories(m)},[]);function i(u){u.preventDefault();const l=t.current.getSelectValue();m.indexOf(l)===-1&&a.getCategories().includes(l)&&(a.deleteCategory(l),s.getNotes().filter(g=>g.categorySelected===l).forEach(g=>{s.modifyNote({...g,categorySelected:"none"})}),t.current.setValue("none"),t.current.updateCategory(),n(e(p,{hideMessage:()=>n(void 0),durationSeconds:1.5,children:"Category deleted !"})))}return r(x,{children:[c,e("div",{className:"div-scroll-Y",children:r("div",{className:"form-display-flex",children:[e("h2",{className:"txt-center",children:"Select a category to delete"}),r("form",{onSubmit:i,children:[e(S,{labelMessage:"Select category",ref:t,isNeccessary:!0}),e("h3",{style:{marginBottom:"5px"},className:"txt-red",children:"Rules :"}),r("ol",{className:"small-margin",children:[e("li",{children:'You cannot delete the "none" or "important" category.'}),e("li",{children:'Category "none" will be associated for cards whose category is deleted.'})]}),e("button",{type:"submit",className:"btn-red",disabled:m.includes((d=t.current)==null?void 0:d.getSelectValue()),children:"Delete category"}),e(v,{})]})]})})]})}function M(){const t=o.exports.useRef(),a=o.exports.useRef(),s=o.exports.useContext(h),c=o.exports.useContext(b),[n,i]=o.exports.useState(),[d,u]=o.exports.useState(!1);o.exports.useLayoutEffect(()=>{t.current.blockCategories(m)},[]);function l(g){g.preventDefault();const f=t.current.getSelectValue(),C=a.current.value.trim();f!="none"&&s.replaceCategory(f,C)&&(c.getNotes().filter(y=>y.categorySelected===f).forEach(y=>{c.modifyNote({...y,categorySelected:C})}),t.current.setValue("none"),t.current.updateCategory(),a.current.value="",i(e(p,{hideMessage:()=>i(void 0),durationSeconds:1.5,children:"Category changed !"})))}return r("div",{className:"form-display-flex",children:[n,e("h2",{className:"txt-center",children:"Change the name of a category"}),r("form",{onSubmit:l,children:[e(S,{labelMessage:"Select category",ref:t,isNeccessary:!0}),e("h3",{className:"txt-red",style:{marginLeft:"0px",marginBottom:"5px"},children:"Rules :"}),r("ol",{className:"small-margin medium-margin-bot",children:[e("li",{children:'You cannot modify the "none" or "important" category .'}),e("li",{children:"There cannot be two categories with the same name ."})]}),e(N,{text:"Insert a name",customText:"The category must be between 3 and 30 characters !",ref:a,minLength:3,maxLength:31,onChangeHandler:g=>{u(g.length>=3)}}),e("button",{type:"submit",className:"btn-green",disabled:!d,style:{marginTop:"1rem"},children:"Save"})]})]})}const k=[{btnText:"Add a new category",categoryState:0},{btnText:"Delete a category",categoryState:1},{btnText:"Modify a category",categoryState:2}];function V(){const[t,a]=o.exports.useState(),s=o.exports.useId(),c=()=>a(void 0);function n(i){a(r(w,{closePanel:c,children:[i===0&&e(T,{}),i===1&&e(R,{}),i===2&&e(M,{})]}))}return r(x,{children:[t,e("div",{className:"settings-panel",children:r("div",{className:"forms-panel",children:[e("h2",{children:"Categories settings"}),k.map((i,d)=>e("button",{className:"btn-to-form",onClick:()=>n(i.categoryState),children:i.btnText},`${s}-${d}`))]})})]})}export{V as default};
