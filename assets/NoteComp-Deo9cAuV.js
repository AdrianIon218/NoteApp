import{r as i,N as v,j as t,L as I,u as p,a as j,b as g,V as b,c as L,R as D,m as k,d as F,e as P,f as B,G as H}from"./index-Ci2UunfB.js";import{T as O}from"./TextArea-BPbccSLR.js";import{I as C}from"./InputText-CB28O-ui.js";import{S,P as E}from"./PanelWithBackdrop-CtaJhjru.js";const M=[{path:v.VIEW_NOTES,navTitle:"My Notes"},{path:v.CREATE_NOTE,navTitle:"New Note"},{path:v.EDIT_NOTES,navTitle:"Edit Notes"}];function A({option:e}){const s=i.useId(),n=M.map((o,c)=>t.jsx(I,{className:e===o.path?"note-nav__selected":"",to:"/notes/"+o.path,children:o.navTitle},`${s}-${c}`));return t.jsx("section",{className:"note-nav",children:n})}const V="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Y=(e=21)=>{let s="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)s+=V[n[e]&63];return s};function _(){const e=p(),s=j(d=>d.category.categories),n=i.useRef(null),[o,c]=i.useState(g.NONE),r=i.useRef(null),[l,u]=i.useState(""),f=i.useRef(null),[h,x]=i.useState("");function m(){var d;u(""),r.current.value="",x(""),f.current.value="",c(g.NONE),(d=n.current)==null||d.resetSelectValue()}function a(d){d.preventDefault();const T={title:l,category:o,text:h,id:Y()};b.dismiss(),b.success("Note added !"),e(L(T)),m()}return t.jsxs("div",{className:"create-note-container",children:[t.jsx("h1",{children:"Create a note"}),t.jsxs("form",{onSubmit:a,children:[t.jsx(C,{ref:r,text:"Title",customText:"Insert a title between 3 and 30 characters",minLength:3,maxLength:30,onChangeHandler:u}),t.jsxs("div",{className:"field",children:["Choose a category"," ",t.jsx(S,{options:s,onSelection:d=>{c(d)},ref:n})]}),t.jsx(O,{name:"textNote",ref:f,onChangeHandler:x}),t.jsxs("div",{className:"field-group-btns",children:[t.jsx("button",{type:"submit",className:"btn-blue",disabled:l.length<3,children:"Save"}),t.jsx("button",{type:"button",className:"btn-blue red",onClick:m,disabled:l.length===0&&o===g.NONE&&h==="",children:"Discard"})]})]})]})}function W(e){const{title:s,category:n,text:o}=e.note,c=o.split(`
`).map((r,l)=>t.jsxs(D.Fragment,{children:[r,t.jsx("br",{})]},l));return t.jsxs(E,{closePanel:e.closeNote,plusClass:"panel-max-extended",children:[n??n!==""?t.jsx("label",{className:"category-label",children:n}):null,t.jsx("h2",{title:s,children:s}),t.jsx("div",{className:"note-text",children:c})]})}function G(e){const[s,n]=i.useState(!1);function o(){n(!0)}function c(){n(!1)}return t.jsxs(t.Fragment,{children:[s&&t.jsx(W,{note:e,closeNote:c}),t.jsxs("div",{className:"note-item",onClick:o,children:[t.jsx("h2",{title:e.title,children:e.title}),e.category!==g.NONE&&e.category.length>0&&t.jsx("label",{children:e.category}),t.jsx("div",{children:e.text.split(`
`)[0]})]})]})}function $(e,s){const n=e.category===g.NONE?"":e.category,o=s.category===g.NONE?"":s.category;return n>o?1:n<o?-1:e.title>s.title?1:e.title<s.title?-1:0}function w(e){return e.sort($)}function q(){const e=j(l=>w(l.notes.notes)),s=j(l=>l.category.categories),[n,o]=i.useState("all"),c=e.filter(l=>n==="all"||l.category===n).map(l=>i.createElement(G,{...l,key:l.id})),r=c.length;return t.jsxs("div",{className:"view-notes",children:[e.length>0&&t.jsxs("h3",{children:[t.jsx("span",{children:"Select a categoryÂ "}),t.jsx(S,{options:["all",...s],onSelection:l=>{o(l)}})]}),t.jsx("h1",{children:r===0?n==="all"?"You don't have any notes!":"You don't have any notes of this category!":r===1?"You have only 1 note!":`You have ${r} notes!`}),r>0&&t.jsx("div",{className:"view-notes__container",children:c})]})}function U(e){var s,n;return t.jsxs("div",{className:"note-item-edit",children:[e.numOfFirstLetersToHighlight?t.jsxs("h2",{title:e.title,children:[t.jsx("span",{className:"text-highlighted",children:(s=e.title)==null?void 0:s.slice(0,e.numOfFirstLetersToHighlight)}),(n=e.title)==null?void 0:n.slice(e.numOfFirstLetersToHighlight)]}):t.jsx("h2",{title:e.title,children:e.title}),e.category!==g.NONE&&t.jsx("label",{children:e.category}),t.jsx("div",{className:"edit-btn",onClick:()=>e.modifyItem(),children:t.jsx("button",{children:"edit"})}),t.jsx("div",{className:"edit-btn",onClick:()=>e.deleteItem(),children:t.jsx("button",{className:"delete",children:"delete"})})]})}function J({note:e,closeEditMode:s}){const n=j(N=>N.category.categories),o=p(),c=i.useRef(null),[r,l]=i.useState(e.category),u=i.useRef(null),[f,h]=i.useState(e.title),x=i.useRef(null),[m,a]=i.useState(e.text),d=f!==e.title||r!==e.category||m!==e.text;function T(N){N.preventDefault();const y={title:u.current.value,category:r,text:x.current.value,id:e.id};(y.title!==e.title||y.category!==e.category||y.text!==e.text)&&(b.dismiss(),o(k(y)),b.success("Note changed !"))}function R(){var N;u.current.value=e.title,h(e.title),x.current.value=e.text,a(e.text),(N=c.current)==null||N.resetSelectValue(),l(e.category)}return t.jsxs(E,{closePanel:s,plusClass:"panel-max-extended",children:[t.jsx("h2",{children:"Edit note "}),t.jsxs("form",{onSubmit:T,children:[t.jsx(C,{ref:u,text:"Title",customText:"The title must be between 3 and 30 characters !",minLength:3,maxLength:30,value:e.title,onChangeHandler:h}),t.jsxs("div",{className:"field",children:["Change the category",t.jsx(S,{options:n,defaultOption:e.category,onSelection:N=>{l(N)},ref:c})]}),t.jsx(O,{name:"textNote",ref:x,value:e.text,onChangeHandler:a}),t.jsxs("div",{className:"field-group-btns",children:[t.jsx("button",{className:"btn-blue",disabled:!d,children:"Save"}),t.jsx("button",{type:"button",onClick:R,className:"btn-blue red",title:"Reset to the last saved content",disabled:!d,children:"Discard changes"})]})]})]})}function K(e){const s=i.useRef(null),n=p();function o(){var r;(r=s.current)==null||r.closeBackdrop()}function c(){n(F(e.id)),o()}return t.jsxs(E,{closePanel:e.closeDeleteForm,plusClass:"panel-mind-extended",ref:s,children:[t.jsx("h1",{children:"Do you really want to delete this note?"}),t.jsxs("div",{children:[t.jsx("button",{className:"confirmation-btn",onClick:c,children:"Yes"}),t.jsx("button",{className:"confirmation-btn btn-no",onClick:o,children:"No"})]})]})}const Q=(e,s)=>{switch(s.type){case 0:return;case 1:return s.item&&s.closeEditMode&&t.jsx(J,{note:s.item,closeEditMode:s.closeEditMode});case 2:return s.item&&s.closeEditMode&&t.jsx(K,{closeDeleteForm:s.closeEditMode,id:s.item.id})}};function X(){const[e,s]=i.useReducer(Q,void 0),[n,o]=i.useState(""),c=j(a=>w(a.notes.notes)),r=c.length,l=n.length;function u(a){s({type:1,item:a,closeEditMode:h})}function f(a){s({type:2,item:a,closeEditMode:h})}function h(){s({type:0})}const x=n.toLowerCase(),m=c.filter(a=>a.title.toLowerCase().startsWith(x)).map((a,d)=>t.jsx(U,{title:a.title,numOfFirstLetersToHighlight:l,category:a.category,text:a.text,modifyItem:()=>{u(a)},deleteItem:()=>{f(a)}},d));return t.jsxs("div",{className:"edit-note-container",children:[e,r===0&&t.jsx("h2",{children:"You don't have any notes to edit!"}),r>3&&t.jsx(C,{required:!1,text:"Search the note by name",onChangeHandler:a=>{o(a)}}),m.length>0&&t.jsx("div",{className:"notes-container",children:m}),m.length===0&&l>0&&t.jsx("h2",{children:"You don't have any note with this name!"})]})}const Z=[{path:"view-notes",component:t.jsx(q,{})},{path:"create-note",component:t.jsx(_,{})},{path:"edit-notes",component:t.jsx(X,{})}];function z({option:e}){const s=Z.filter(n=>n.path===e)[0];return t.jsx("section",{className:"note-box",children:s.component})}const ee=Object.values(v);function le(){const{option:e}=P();return e===void 0||!ee.includes(e)?t.jsx(B,{replace:!0,to:"/page-not-found"}):t.jsxs(H,{className:"note-container",children:[t.jsx(A,{option:e}),t.jsx(z,{option:e})]})}export{le as default};
