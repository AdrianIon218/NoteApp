import{r as c,N as y,j as t,L as D,s as w,G as O,u as T,a as p,b as N,V as b,c as L,R as F,m as P,d as B,e as H,f as M}from"./index-UJdNiDpH.js";import{T as R}from"./TextArea-Lyxi6mL_.js";import{I as S}from"./InputText-DjRrjXqn.js";import{S as C,P as E}from"./PanelWithBackdrop-NSxvHZnk.js";const A=[{path:y.VIEW_NOTES,navTitle:"My Notes"},{path:y.CREATE_NOTE,navTitle:"New Note"},{path:y.EDIT_NOTES,navTitle:"Edit Notes"}],V=w(O)(({theme:e})=>({display:"flex",flexDirection:"column",rowGap:"1em",alignItems:"center",marginTop:"3em","& a":{color:"white",textDecoration:"none",fontSize:e.spacing(2.5),padding:".3rem .5rem",fontWeight:700,border:".2rem solid transparent",borderRadius:".4rem",fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",transition:"all .5s, box-shadow .7s",backgroundColor:e.palette.customBlue.dark},"& a.active":{pointerEvents:"none",backgroundColor:"white",color:e.palette.customBlue.dark},"& a.active:hover":{boxShadow:"none"},"& a:hover":{boxShadow:" rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px"},[e.breakpoints.down("lg")]:{marginTop:0}}));function Y({option:e}){const n=c.useId(),s=A.map((o,i)=>t.jsx(D,{className:e===o.path?"active":"",to:"/notes/"+o.path,children:o.navTitle},`${n}-${i}`));return t.jsx(V,{children:s})}const W="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _=(e=21)=>{let n="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)n+=W[s[e]&63];return n};function G(){const e=T(),n=p(d=>d.category.categories),s=c.useRef(null),[o,i]=c.useState(N.NONE),r=c.useRef(null),[a,u]=c.useState(""),f=c.useRef(null),[x,h]=c.useState("");function m(){var d;u(""),r.current.value="",h(""),f.current.value="",i(N.NONE),(d=s.current)==null||d.resetSelectValue()}function l(d){d.preventDefault();const v={title:a,category:o,text:x,id:_()};b.dismiss(),b.success("Note added !"),e(L(v)),m()}return t.jsxs("div",{className:"create-note-container",children:[t.jsx("h1",{children:"Create a note"}),t.jsxs("form",{onSubmit:l,children:[t.jsx(S,{ref:r,text:"Title",customText:"Insert a title between 3 and 30 characters",minLength:3,maxLength:30,onChangeHandler:u}),t.jsxs("div",{className:"field",children:["Choose a category"," ",t.jsx(C,{options:n,onSelection:d=>{i(d)},ref:s})]}),t.jsx(R,{name:"textNote",ref:f,onChangeHandler:h}),t.jsxs("div",{className:"field-group-btns",children:[t.jsx("button",{type:"submit",className:"btn-blue",disabled:a.length<3,children:"Save"}),t.jsx("button",{type:"button",className:"btn-blue red",onClick:m,disabled:a.length===0&&o===N.NONE&&x==="",children:"Discard"})]})]})]})}function U(e){const{title:n,category:s,text:o}=e.note,i=o.split(`
`).map((r,a)=>t.jsxs(F.Fragment,{children:[r,t.jsx("br",{})]},a));return t.jsxs(E,{closePanel:e.closeNote,plusClass:"panel-max-extended",children:[s??s!==""?t.jsx("label",{className:"category-label",children:s}):null,t.jsx("h2",{title:n,children:n}),t.jsx("div",{className:"note-text",children:i})]})}function $(e){const[n,s]=c.useState(!1);function o(){s(!0)}function i(){s(!1)}return t.jsxs(t.Fragment,{children:[n&&t.jsx(U,{note:e,closeNote:i}),t.jsxs("div",{className:"note-item",onClick:o,children:[t.jsx("h2",{title:e.title,children:e.title}),e.category!==N.NONE&&e.category.length>0&&t.jsx("label",{children:e.category}),t.jsx("div",{children:e.text.split(`
`)[0]})]})]})}function q(e,n){const s=e.category===N.NONE?"":e.category,o=n.category===N.NONE?"":n.category;return s>o?1:s<o?-1:e.title>n.title?1:e.title<n.title?-1:0}function k(e){return e.sort(q)}function J(){const e=p(a=>k(a.notes.notes)),n=p(a=>a.category.categories),[s,o]=c.useState("all"),i=e.filter(a=>s==="all"||a.category===s).map(a=>c.createElement($,{...a,key:a.id})),r=i.length;return t.jsxs("div",{className:"view-notes",children:[e.length>0&&t.jsxs("h3",{children:[t.jsx("span",{children:"Select a categoryÂ "}),t.jsx(C,{options:["all",...n],onSelection:a=>{o(a)}})]}),t.jsx("h1",{children:r===0?s==="all"?"You don't have any notes!":"You don't have any notes of this category!":r===1?"You have only 1 note!":`You have ${r} notes!`}),r>0&&t.jsx("div",{className:"view-notes__container",children:i})]})}function K(e){var n,s;return t.jsxs("div",{className:"note-item-edit",children:[e.numOfFirstLetersToHighlight?t.jsxs("h2",{title:e.title,children:[t.jsx("span",{className:"text-highlighted",children:(n=e.title)==null?void 0:n.slice(0,e.numOfFirstLetersToHighlight)}),(s=e.title)==null?void 0:s.slice(e.numOfFirstLetersToHighlight)]}):t.jsx("h2",{title:e.title,children:e.title}),e.category!==N.NONE&&t.jsx("label",{children:e.category}),t.jsx("div",{className:"edit-btn",onClick:()=>e.modifyItem(),children:t.jsx("button",{children:"edit"})}),t.jsx("div",{className:"edit-btn",onClick:()=>e.deleteItem(),children:t.jsx("button",{className:"delete",children:"delete"})})]})}function Q({note:e,closeEditMode:n}){const s=p(g=>g.category.categories),o=T(),i=c.useRef(null),[r,a]=c.useState(e.category),u=c.useRef(null),[f,x]=c.useState(e.title),h=c.useRef(null),[m,l]=c.useState(e.text),d=f!==e.title||r!==e.category||m!==e.text;function v(g){g.preventDefault();const j={title:u.current.value,category:r,text:h.current.value,id:e.id};(j.title!==e.title||j.category!==e.category||j.text!==e.text)&&(b.dismiss(),o(P(j)),b.success("Note changed !"))}function I(){var g;u.current.value=e.title,x(e.title),h.current.value=e.text,l(e.text),(g=i.current)==null||g.resetSelectValue(),a(e.category)}return t.jsxs(E,{closePanel:n,plusClass:"panel-max-extended",children:[t.jsx("h2",{children:"Edit note "}),t.jsxs("form",{onSubmit:v,children:[t.jsx(S,{ref:u,text:"Title",customText:"The title must be between 3 and 30 characters !",minLength:3,maxLength:30,value:e.title,onChangeHandler:x}),t.jsxs("div",{className:"field",children:["Change the category",t.jsx(C,{options:s,defaultOption:e.category,onSelection:g=>{a(g)},ref:i})]}),t.jsx(R,{name:"textNote",ref:h,value:e.text,onChangeHandler:l}),t.jsxs("div",{className:"field-group-btns",children:[t.jsx("button",{className:"btn-blue",disabled:!d,children:"Save"}),t.jsx("button",{type:"button",onClick:I,className:"btn-blue red",title:"Reset to the last saved content",disabled:!d,children:"Discard changes"})]})]})]})}function X(e){const n=c.useRef(null),s=T();function o(){var r;(r=n.current)==null||r.closeBackdrop()}function i(){s(B(e.id)),o()}return t.jsxs(E,{closePanel:e.closeDeleteForm,plusClass:"panel-mind-extended",ref:n,children:[t.jsx("h1",{children:"Do you really want to delete this note?"}),t.jsxs("div",{children:[t.jsx("button",{className:"confirmation-btn",onClick:i,children:"Yes"}),t.jsx("button",{className:"confirmation-btn btn-no",onClick:o,children:"No"})]})]})}const Z=(e,n)=>{switch(n.type){case 0:return;case 1:return n.item&&n.closeEditMode&&t.jsx(Q,{note:n.item,closeEditMode:n.closeEditMode});case 2:return n.item&&n.closeEditMode&&t.jsx(X,{closeDeleteForm:n.closeEditMode,id:n.item.id})}};function z(){const[e,n]=c.useReducer(Z,void 0),[s,o]=c.useState(""),i=p(l=>k(l.notes.notes)),r=i.length,a=s.length;function u(l){n({type:1,item:l,closeEditMode:x})}function f(l){n({type:2,item:l,closeEditMode:x})}function x(){n({type:0})}const h=s.toLowerCase(),m=i.filter(l=>l.title.toLowerCase().startsWith(h)).map((l,d)=>t.jsx(K,{title:l.title,numOfFirstLetersToHighlight:a,category:l.category,text:l.text,modifyItem:()=>{u(l)},deleteItem:()=>{f(l)}},d));return t.jsxs("div",{className:"edit-note-container",children:[e,r===0&&t.jsx("h2",{children:"You don't have any notes to edit!"}),r>3&&t.jsx(S,{required:!1,text:"Search the note by name",onChangeHandler:l=>{o(l)}}),m.length>0&&t.jsx("div",{className:"notes-container",children:m}),m.length===0&&a>0&&t.jsx("h2",{children:"You don't have any note with this name!"})]})}const ee=[{path:"view-notes",component:t.jsx(J,{})},{path:"create-note",component:t.jsx(G,{})},{path:"edit-notes",component:t.jsx(z,{})}];function te({option:e}){const n=ee.filter(s=>s.path===e)[0];return t.jsx("section",{className:"note-box",children:n.component})}const ne=Object.values(y),se=w(O)(({theme:e})=>({padding:"2rem",display:"flex",flexWrap:"wrap",justifyContent:"space-around",gap:"2rem",[e.breakpoints.down("lg")]:{paddingTop:0,gap:"3rem"}}));function ce(){const{option:e}=H();return e===void 0||!ne.includes(e)?t.jsx(M,{replace:!0,to:"/page-not-found"}):t.jsxs(se,{className:"note-container",children:[t.jsx(Y,{option:e}),t.jsx(te,{option:e})]})}export{ce as default};
