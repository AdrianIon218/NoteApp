import{a as x,j as e,r as o,u as m,V as d,i as b,b as h,k as C,l as S,n as v,T}from"./index-DHabldr3.js";import{I as j,S as N,P as w}from"./PanelWithBackdrop-CekeLx-U.js";import{G as R,a as I}from"./styledComponentsMUI-CzLIByiE.js";function O(c){const t=x(s=>s.category.categories);return e.jsxs("fieldset",{className:"categories-group",children:[e.jsx("legend",{children:c.title??"Current categories"}),e.jsx("div",{className:"categories-flex",children:t.map((s,a)=>e.jsx("div",{children:s},a))})]})}function P(){const c=x(r=>r.category.categories),[t,s]=o.useState(""),a=o.useRef(),l=m();function n(r){r.preventDefault(),d.dismiss(),c.includes(t)?d.error("Invalid name !"):(a.current.value="",s(""),l(b(t)),d.success("Category added !"))}return e.jsxs("div",{className:"flex-col-ctn setting-form",children:[e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"flex-center",children:[e.jsx("h2",{className:"txt-center",children:"Add a new category"}),e.jsx(j,{text:"New category name",ref:a,minLength:3,maxLength:31,onChangeHandler:r=>{s(r.trim())}}),e.jsx("button",{type:"submit",className:"btn btn-green btn-styled",disabled:!(t.length>=3),children:"Add new category"})]})}),e.jsxs("div",{className:"rules-ctn",children:[e.jsx("h3",{className:"txt-red",children:"Rules :"}),e.jsxs("ol",{children:[e.jsx("li",{children:"The new category must be unique."}),e.jsx("li",{children:"The new category must be between 3 and 30 characters."})]})]}),e.jsx(O,{})]})}const A="choose";function D(){const c=x(r=>r.category.categories.filter(i=>i!==h.NONE&&i!==h.IMPORTANT)),[t,s]=o.useState(""),a=o.useRef(null),l=m();function n(r){var i;r.preventDefault(),l(C(t)),l(S(t,h.NONE)),d.dismiss(),d.success("Category deleted !"),s(""),(i=a.current)==null||i.resetSelectValue()}return e.jsxs("div",{className:"flex-col-ctn setting-form",children:[c.length!==0?e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"flex-center",children:[e.jsx("h2",{className:"txt-center",children:"Select a category to delete"}),e.jsx(N,{options:c,onSelection:s,defaultOption:A,ref:a}),e.jsx("button",{type:"submit",className:"btn btn-red",disabled:t==="",children:"Delete category"})]})}):e.jsx("h2",{className:"txt-center",children:"You don't have any category to delete!"}),e.jsxs("div",{className:"rules-ctn",children:[e.jsx("h3",{className:"txt-red",children:"Rules :"}),e.jsxs("ol",{children:[e.jsx("li",{children:'You cannot delete the "none" or "important" category.'}),e.jsx("li",{children:'Category "none" will be associated for cards whose category is deleted.'})]})]})]})}function M(){const c=m(),t=x(u=>u.category.categories.filter(g=>g!==h.NONE&&g!==h.IMPORTANT)),[s,a]=o.useState(""),[l,n]=o.useState(""),[r,i]=o.useState(!1),y=o.useRef(null),f=o.useRef();function p(u){u.preventDefault(),d.dismiss(),t.includes(l)?d.error("Invalid name !"):(c(v(s,l)),f.current.value="",y.current.resetSelectValue(),a(""),n(""),i(!1),d.success("Category changed !"))}return e.jsxs("div",{className:"flex-col-ctn setting-form",children:[t.length===0?e.jsx("h2",{className:"txt-center",children:"You don't have any category to modify!"}):e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"flex-center",children:[e.jsx("h2",{className:"txt-center",children:"Modify a category"}),e.jsxs("div",{className:"field",style:{fontWeight:900},children:["Choose a category",e.jsx(N,{options:t,onSelection:u=>{a(u),i(l.length>=3)},defaultOption:"select",ref:y})]}),e.jsx(j,{text:"Rename to",customText:"The category must be between 3 and 30 characters!",ref:f,minLength:3,maxLength:31,required:!1,onChangeHandler:u=>{const g=u.trim();n(g),i(g.length>=3&&s!=="")}}),e.jsx("button",{type:"submit",className:"btn btn-green btn-styled",children:"Save"})]})}),e.jsxs("div",{className:"rules-ctn",children:[e.jsx("h3",{className:"txt-red",children:"Rules :"}),e.jsxs("ol",{children:[e.jsx("li",{children:'You cannot modify the "none" or "important" category.'}),e.jsx("li",{children:"There cannot be two categories with the same name."})]})]})]})}const F=[{btnText:"Add a new category",categoryState:0},{btnText:"Delete a category",categoryState:1},{btnText:"Modify a category",categoryState:2}];function B(){const[c,t]=o.useState(),s=o.useId(),a=()=>t(void 0);function l(n){t(e.jsxs(w,{closePanel:a,children:[n===0&&e.jsx(P,{}),n===1&&e.jsx(D,{}),n===2&&e.jsx(M,{})]}))}return e.jsxs(e.Fragment,{children:[c,e.jsx(R,{children:e.jsxs(I,{children:[e.jsx(T,{variant:"h5",textAlign:"center",fontWeight:800,mb:3,sx:{textDecoration:"underline dotted",textUnderlinePosition:"under",textUnderlineOffset:2},children:"Categories settings"}),F.map((n,r)=>e.jsx("button",{className:"btn-to-form",onClick:()=>l(n.categoryState),children:n.btnText},`${s}-${r}`))]})})]})}export{B as default};
