import{a as u,j as e,r as c,u as x,V as d,g as b,b as m,h as C,i as S,k as v}from"./index-UJdNiDpH.js";import{S as j,P as w}from"./PanelWithBackdrop-NSxvHZnk.js";import{I as N}from"./InputText-DjRrjXqn.js";function T(o){const t=u(s=>s.category.categories);return e.jsxs("fieldset",{className:"categories-group",children:[e.jsx("legend",{children:o.title??"Current categories"}),e.jsx("div",{className:"categories-flex",children:t.map((s,a)=>e.jsx("div",{children:s},a))})]})}function R(){const o=u(r=>r.category.categories),[t,s]=c.useState(""),a=c.useRef(),l=x();function n(r){r.preventDefault(),d.dismiss(),o.includes(t)?d.error("Invalid name !"):(a.current.value="",s(""),l(b(t)),d.success("Category added !"))}return e.jsxs("div",{className:"flex-col-ctn setting-form",children:[e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"flex-center",children:[e.jsx("h2",{className:"txt-center",children:"Add a new category"}),e.jsx(N,{text:"New category name",ref:a,minLength:3,maxLength:31,onChangeHandler:r=>{s(r.trim())}}),e.jsx("button",{type:"submit",className:"btn btn-green btn-styled",disabled:!(t.length>=3),children:"Add new category"})]})}),e.jsxs("div",{className:"rules-ctn",children:[e.jsx("h3",{className:"txt-red",children:"Rules :"}),e.jsxs("ol",{children:[e.jsx("li",{children:"The new category must be unique."}),e.jsx("li",{children:"The new category must be between 3 and 30 characters."})]})]}),e.jsx(T,{})]})}const I="choose";function O(){const o=u(r=>r.category.categories.filter(i=>i!==m.NONE&&i!==m.IMPORTANT)),[t,s]=c.useState(""),a=c.useRef(null),l=x();function n(r){var i;r.preventDefault(),l(C(t)),l(S(t,m.NONE)),d.dismiss(),d.success("Category deleted !"),s(""),(i=a.current)==null||i.resetSelectValue()}return e.jsxs("div",{className:"flex-col-ctn setting-form",children:[o.length!==0?e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"flex-center",children:[e.jsx("h2",{className:"txt-center",children:"Select a category to delete"}),e.jsx(j,{options:o,onSelection:s,defaultOption:I,ref:a}),e.jsx("button",{type:"submit",className:"btn btn-red",disabled:t==="",children:"Delete category"})]})}):e.jsx("h2",{className:"txt-center",children:"You don't have any category to delete!"}),e.jsxs("div",{className:"rules-ctn",children:[e.jsx("h3",{className:"txt-red",children:"Rules :"}),e.jsxs("ol",{children:[e.jsx("li",{children:'You cannot delete the "none" or "important" category.'}),e.jsx("li",{children:'Category "none" will be associated for cards whose category is deleted.'})]})]})]})}function A(){const o=x(),t=u(g=>g.category.categories.filter(h=>h!==m.NONE&&h!==m.IMPORTANT)),[s,a]=c.useState(""),[l,n]=c.useState(""),[r,i]=c.useState(!1),y=c.useRef(null),f=c.useRef();function p(g){g.preventDefault(),d.dismiss(),t.includes(l)?d.error("Invalid name !"):(o(v(s,l)),f.current.value="",y.current.resetSelectValue(),a(""),n(""),i(!1),d.success("Category changed !"))}return e.jsxs("div",{className:"flex-col-ctn setting-form",children:[t.length===0?e.jsx("h2",{className:"txt-center",children:"You don't have any category to modify!"}):e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"flex-center",children:[e.jsx("h2",{className:"txt-center",children:"Modify a category"}),e.jsxs("div",{className:"field",style:{fontWeight:900},children:["Choose a category",e.jsx(j,{options:t,onSelection:g=>{a(g),i(l.length>=3)},defaultOption:"select",ref:y})]}),e.jsx(N,{text:"Rename to",customText:"The category must be between 3 and 30 characters!",ref:f,minLength:3,maxLength:31,required:!1,onChangeHandler:g=>{const h=g.trim();n(h),i(h.length>=3&&s!=="")}}),e.jsx("button",{type:"submit",className:"btn btn-green btn-styled",children:"Save"})]})}),e.jsxs("div",{className:"rules-ctn",children:[e.jsx("h3",{className:"txt-red",children:"Rules :"}),e.jsxs("ol",{children:[e.jsx("li",{children:'You cannot modify the "none" or "important" category.'}),e.jsx("li",{children:"There cannot be two categories with the same name."})]})]})]})}const D=[{btnText:"Add a new category",categoryState:0},{btnText:"Delete a category",categoryState:1},{btnText:"Modify a category",categoryState:2}];function V(){const[o,t]=c.useState(),s=c.useId(),a=()=>t(void 0);function l(n){t(e.jsxs(w,{closePanel:a,children:[n===0&&e.jsx(R,{}),n===1&&e.jsx(O,{}),n===2&&e.jsx(A,{})]}))}return e.jsxs(e.Fragment,{children:[o,e.jsx("div",{className:"panel-big",children:e.jsxs("div",{className:"forms-panel",children:[e.jsx("h2",{children:"Categories settings"}),D.map((n,r)=>e.jsx("button",{className:"btn-to-form",onClick:()=>l(n.categoryState),children:n.btnText},`${s}-${r}`))]})})]})}export{V as default};
