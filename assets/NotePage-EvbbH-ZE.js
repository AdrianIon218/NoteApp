import{r as c,N as p,j as t,L as D,s as w,G as O,u as T,a as j,b as f,V as b,c as L,R as F,m as P,d as B,e as A,f as H}from"./index-D8fUxh9J.js";import{I as C}from"./InputText-DozTnGi1.js";import{S,P as E}from"./PanelWithBackdrop-C_WajhiB.js";const M=[{path:p.VIEW_NOTES,navTitle:"My Notes"},{path:p.CREATE_NOTE,navTitle:"New Note"},{path:p.EDIT_NOTES,navTitle:"Edit Notes"}],V=w(O)(({theme:e})=>({display:"flex",flexDirection:"column",rowGap:"1em",alignItems:"center",marginTop:"3em","& a":{color:"white",textDecoration:"none",fontSize:e.spacing(2.5),padding:".3rem .5rem",fontWeight:700,border:".2rem solid transparent",borderRadius:".4rem",fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",transition:"all .5s, box-shadow .7s",backgroundColor:e.palette.customBlue.dark},"& a.active":{pointerEvents:"none",backgroundColor:"white",color:e.palette.customBlue.dark},"& a.active:hover":{boxShadow:"none"},"& a:hover":{boxShadow:" rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px"},[e.breakpoints.down("lg")]:{marginTop:0}}));function W({option:e}){const n=c.useId(),s=M.map((a,o)=>t.jsx(D,{className:e===a.path?"active":"",to:"/notes/"+a.path,children:a.navTitle},`${n}-${o}`));return t.jsx(V,{children:s})}const Y="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _=(e=21)=>{let n="",s=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)n+=Y[s[e]&63];return n};function G(e,n){return t.jsx("div",{className:"field",children:t.jsx("textarea",{className:"textArea",placeholder:"Write here ...",autoComplete:"off",name:e.name,ref:n,defaultValue:e.value,onChange:s=>{var o;const a=s.currentTarget.value;(o=e.onChangeHandler)==null||o.call(e,a)}})})}const R=c.forwardRef(G);function $(){const e=T(),n=j(d=>d.category.categories),s=c.useRef(null),[a,o]=c.useState(f.NONE),r=c.useRef(null),[l,u]=c.useState(""),N=c.useRef(null),[x,h]=c.useState("");function m(){var d;u(""),r.current.value="",h(""),N.current.value="",o(f.NONE),(d=s.current)==null||d.resetSelectValue()}function i(d){d.preventDefault();const v={title:l,category:a,text:x,id:_()};b.dismiss(),b.success("Note added !"),e(L(v)),m()}return t.jsxs("div",{className:"create-note-container",children:[t.jsx("h1",{children:"Create a note"}),t.jsxs("form",{onSubmit:i,children:[t.jsx(C,{ref:r,text:"Title",customText:"Insert a title between 3 and 30 characters",minLength:3,maxLength:30,onChangeHandler:u}),t.jsxs("div",{className:"field",children:["Choose a category"," ",t.jsx(S,{options:n,onSelection:d=>{o(d)},ref:s})]}),t.jsx(R,{name:"textNote",ref:N,onChangeHandler:h}),t.jsxs("div",{className:"field-group-btns",children:[t.jsx("button",{type:"submit",className:"btn-blue",disabled:l.length<3,children:"Save"}),t.jsx("button",{type:"button",className:"btn-blue red",onClick:m,disabled:l.length===0&&a===f.NONE&&x==="",children:"Discard"})]})]})]})}function U(e){const{title:n,category:s,text:a}=e.note,o=a.split(`
`).map((r,l)=>t.jsxs(F.Fragment,{children:[r,t.jsx("br",{})]},l));return t.jsxs(E,{closePanel:e.closeNote,plusClass:"panel-max-extended",children:[s??s!==""?t.jsx("label",{className:"category-label",children:s}):null,t.jsx("h2",{title:n,children:n}),t.jsx("div",{className:"note-text",children:o})]})}function q(e){const[n,s]=c.useState(!1);function a(){s(!0)}function o(){s(!1)}return t.jsxs(t.Fragment,{children:[n&&t.jsx(U,{note:e,closeNote:o}),t.jsxs("div",{className:"note-item",onClick:a,children:[t.jsx("h2",{title:e.title,children:e.title}),e.category!==f.NONE&&e.category.length>0&&t.jsx("label",{children:e.category}),t.jsx("div",{children:e.text.split(`
`)[0]})]})]})}function J(e,n){const s=e.category===f.NONE?"":e.category,a=n.category===f.NONE?"":n.category;return s>a?1:s<a?-1:e.title>n.title?1:e.title<n.title?-1:0}function k(e){return e.sort(J)}function K(){const e=j(l=>k(l.notes.notes)),n=j(l=>l.category.categories),[s,a]=c.useState("all"),o=e.filter(l=>s==="all"||l.category===s).map(l=>c.createElement(q,{...l,key:l.id})),r=o.length;return t.jsxs("div",{className:"view-notes",children:[e.length>0&&t.jsxs("h3",{children:[t.jsx("span",{children:"Select a categoryÂ "}),t.jsx(S,{options:["all",...n],onSelection:l=>{a(l)}})]}),t.jsx("h1",{children:r===0?s==="all"?"You don't have any notes!":"You don't have any notes of this category!":r===1?"You have only 1 note!":`You have ${r} notes!`}),r>0&&t.jsx("div",{className:"view-notes__container",children:o})]})}function Q(e){var n,s;return t.jsxs("div",{className:"note-item-edit",children:[e.numOfFirstLetersToHighlight?t.jsxs("h2",{title:e.title,children:[t.jsx("span",{className:"text-highlighted",children:(n=e.title)==null?void 0:n.slice(0,e.numOfFirstLetersToHighlight)}),(s=e.title)==null?void 0:s.slice(e.numOfFirstLetersToHighlight)]}):t.jsx("h2",{title:e.title,children:e.title}),e.category!==f.NONE&&t.jsx("label",{children:e.category}),t.jsx("div",{className:"edit-btn",onClick:()=>e.modifyItem(),children:t.jsx("button",{children:"edit"})}),t.jsx("div",{className:"edit-btn",onClick:()=>e.deleteItem(),children:t.jsx("button",{className:"delete",children:"delete"})})]})}function X({note:e,closeEditMode:n}){const s=j(g=>g.category.categories),a=T(),o=c.useRef(null),[r,l]=c.useState(e.category),u=c.useRef(null),[N,x]=c.useState(e.title),h=c.useRef(null),[m,i]=c.useState(e.text),d=N!==e.title||r!==e.category||m!==e.text;function v(g){g.preventDefault();const y={title:u.current.value,category:r,text:h.current.value,id:e.id};(y.title!==e.title||y.category!==e.category||y.text!==e.text)&&(b.dismiss(),a(P(y)),b.success("Note changed !"))}function I(){var g;u.current.value=e.title,x(e.title),h.current.value=e.text,i(e.text),(g=o.current)==null||g.resetSelectValue(),l(e.category)}return t.jsxs(E,{closePanel:n,plusClass:"panel-max-extended",children:[t.jsx("h2",{children:"Edit note "}),t.jsxs("form",{onSubmit:v,children:[t.jsx(C,{ref:u,text:"Title",customText:"The title must be between 3 and 30 characters !",minLength:3,maxLength:30,value:e.title,onChangeHandler:x}),t.jsxs("div",{className:"field",children:["Change the category",t.jsx(S,{options:s,defaultOption:e.category,onSelection:g=>{l(g)},ref:o})]}),t.jsx(R,{name:"textNote",ref:h,value:e.text,onChangeHandler:i}),t.jsxs("div",{className:"field-group-btns",children:[t.jsx("button",{className:"btn-blue",disabled:!d,children:"Save"}),t.jsx("button",{type:"button",onClick:I,className:"btn-blue red",title:"Reset to the last saved content",disabled:!d,children:"Discard changes"})]})]})]})}function Z(e){const n=c.useRef(null),s=T();function a(){var r;(r=n.current)==null||r.closeBackdrop()}function o(){s(B(e.id)),a()}return t.jsxs(E,{closePanel:e.closeDeleteForm,plusClass:"panel-mind-extended",ref:n,children:[t.jsx("h1",{children:"Do you really want to delete this note?"}),t.jsxs("div",{children:[t.jsx("button",{className:"confirmation-btn",onClick:o,children:"Yes"}),t.jsx("button",{className:"confirmation-btn btn-no",onClick:a,children:"No"})]})]})}const z=(e,n)=>{switch(n.type){case 0:return;case 1:return n.item&&n.closeEditMode&&t.jsx(X,{note:n.item,closeEditMode:n.closeEditMode});case 2:return n.item&&n.closeEditMode&&t.jsx(Z,{closeDeleteForm:n.closeEditMode,id:n.item.id})}};function ee(){const[e,n]=c.useReducer(z,void 0),[s,a]=c.useState(""),o=j(i=>k(i.notes.notes)),r=o.length,l=s.length;function u(i){n({type:1,item:i,closeEditMode:x})}function N(i){n({type:2,item:i,closeEditMode:x})}function x(){n({type:0})}const h=s.toLowerCase(),m=o.filter(i=>i.title.toLowerCase().startsWith(h)).map((i,d)=>t.jsx(Q,{title:i.title,numOfFirstLetersToHighlight:l,category:i.category,text:i.text,modifyItem:()=>{u(i)},deleteItem:()=>{N(i)}},d));return t.jsxs("div",{className:"edit-note-container",children:[e,r===0&&t.jsx("h2",{children:"You don't have any notes to edit!"}),r>3&&t.jsx(C,{required:!1,text:"Search the note by name",onChangeHandler:i=>{a(i)}}),m.length>0&&t.jsx("div",{className:"notes-container",children:m}),m.length===0&&l>0&&t.jsx("h2",{children:"You don't have any note with this name!"})]})}const te=[{path:"view-notes",component:t.jsx(K,{})},{path:"create-note",component:t.jsx($,{})},{path:"edit-notes",component:t.jsx(ee,{})}];function ne({option:e}){const n=te.filter(s=>s.path===e)[0];return t.jsx("section",{className:"note-box",children:n.component})}const se=Object.values(p),ae=w(O)(({theme:e})=>({padding:"2rem",display:"flex",flexWrap:"wrap",justifyContent:"space-around",gap:"2rem",[e.breakpoints.down("lg")]:{paddingTop:0,gap:"3rem"}}));function ce(){const{option:e}=A();return e===void 0||!se.includes(e)?t.jsx(H,{replace:!0,to:"/page-not-found"}):t.jsxs(ae,{className:"note-container",children:[t.jsx(W,{option:e}),t.jsx(ne,{option:e})]})}export{ce as default};
