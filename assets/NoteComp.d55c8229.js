import{r as c,j as t,N,a as r,R as D,F as b,c as y}from"./index.e933127d.js";import{D as p}from"./DropDownBtn.94f69bfd.js";import{T as C}from"./TextArea.6e2d4cb6.js";import{T as w,I as k}from"./TemporalNotification.8854e1cb.js";var m=(e=>(e[e.none=0]="none",e[e.viewNotes=1]="viewNotes",e[e.createNote=2]="createNote",e[e.editNote=3]="editNote",e))(m||{});const M=[{btnValue:1,navTitle:"My Notes"},{btnValue:2,navTitle:"New Note"},{btnValue:3,navTitle:"Edit Note"}];function R(e){const[n,o]=c.exports.useState(()=>e.initialNavState);function l(a){const{currentTarget:d}=a,s=+d.name;n!==s&&(e.setNavNotesState(s),o(s))}const i=M.map((a,d)=>t("button",{className:n===a.btnValue?"note__nav__selected":"",name:a.btnValue.toString(),onClick:l,children:a.navTitle},d));return t("section",{className:"note__nav",children:i})}let V=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,o)=>(o&=63,o<36?n+=o.toString(36):o<62?n+=(o-26).toString(36).toUpperCase():o>62?n+="-":n+="_",n),"");function E(){const[e,n]=c.exports.useState(!1),o=c.exports.useContext(N),l=c.exports.useRef(null),i=c.exports.useRef(),a=c.exports.useRef(null);function d(){l.current.value="",a.current.value="",i.current.resetSelectValue()}function s(x){if(!e){x.preventDefault();const g=l.current.value,S=i.current.getSelectValue(),f=a.current.value,h={title:g,categorySelected:S,text:f,id:V()};o.addNote(h),d(),n(!0)}}function u(){n(!1)}return r("div",{className:"create-note-container",children:[e&&t(w,{hideMessage:u,children:"Note added !"}),t("h1",{children:"Create a note "}),r("form",{onSubmit:s,children:[t(k,{ref:l,text:"Title",customText:"Insert a title between 3 and 30 characters",minLength:3,maxLength:30}),t(p,{labelMessage:"Choose a category",ref:i}),t(C,{name:"textNote",ref:a}),r("div",{className:"field",children:[r("button",{type:"submit",className:"btn-blue",children:[" ","Save"," "]}),r("button",{type:"button",className:"btn-blue red",onClick:d,children:[" ","Discard"," "]})]})]})]})}function I(e){const{title:n,categorySelected:o,text:l}=e.note,i=c.exports.useRef(null),a=l.split(`
`).map((s,u)=>r(D.Fragment,{children:[s,t("br",{})]},u));function d(){i.current.classList.add("anim-line-down"),setTimeout(e.closeNote,700)}return t("div",{className:"backdrop",onClick:d,children:r("div",{className:"note-centered",ref:i,onClick:s=>s.stopPropagation(),children:[o?t("label",{children:o}):t(b,{}),t("button",{className:"close-btn",onClick:d,children:"\xD7"}),t("h2",{title:n,children:n}),t("div",{className:"note-text",children:a})]})})}function F(e){const[n,o]=c.exports.useState(!1);function l(){o(!0)}function i(){o(!1)}return r(b,{children:[n&&t(I,{note:e,closeNote:i}),r("div",{className:"note-item",onClick:l,children:[t("h2",{title:e.title,children:e.title}),e.categorySelected!==y[0]&&t("label",{children:e.categorySelected}),t("div",{children:e.text.split(`
`)[0]})]})]})}function T(e){function n(o,l){return o.categorySelected>l.categorySelected?1:o.categorySelected<l.categorySelected?-1:o.title>l.title?1:o.title<l.title?-1:0}return e.sort(n)}function L(){const e=T(c.exports.useContext(N).getNotes()),n=e.map((o,l)=>t(F,{title:o.title,text:o.text,categorySelected:o.categorySelected,id:o.id},l));return r("div",{className:"viewNote",children:[t("h1",{children:e.length===0?"You don't have any notes":e.length===1?"You have only 1 note":"You have "+e.length.toString()+" notes"}),e.length>0&&t("div",{className:"viewNote__container",children:n})]})}function _(e){return r("div",{className:"note-item-edit",children:[t("h2",{title:e.title,children:e.title}),e.categorySelected!==y[0]&&t("label",{children:e.categorySelected}),t("div",{className:"edit-btn",onClick:()=>e.modifyItem(),children:t("button",{children:"edit"})}),t("div",{className:"edit-btn",onClick:()=>e.deleteItem(),children:t("button",{className:"delete",children:"delete"})})]})}function P({note:e,closeEditMode:n}){const[o,l]=c.exports.useState(!1),i=c.exports.useContext(N),a=c.exports.useRef(null),d=c.exports.useRef(null),s=c.exports.useRef(null),u=c.exports.useRef(null);function x(h){h.preventDefault();const v={title:d.current.value,categorySelected:s.current.getSelectValue(),text:u.current.value,id:e.id};(v.title!==e.title||v.categorySelected!==e.categorySelected||v.text!==e.text)&&(i.modifyNote(v),l(!0))}function g(){l(!1)}function S(){d.current.value=e.title,u.current.value=e.text,s.current.setValue(e.categorySelected)}function f(){a.current.classList.add("anim-line-down-modify"),setTimeout(()=>n(),600)}return t("div",{className:"backdrop",onClick:f,children:r("div",{className:"note-modify",ref:a,onClick:h=>h.stopPropagation(),children:[o&&t(w,{hideMessage:g,durationSeconds:2.2,children:"Note changed !"}),t("h2",{children:"Edit note "}),r("form",{onSubmit:x,children:[t(k,{ref:d,text:"Title",customText:"The title must be between 3 and 30 characters !",minLength:3,maxLength:30,value:e.title}),t(p,{labelMessage:"Change the category",ref:s,valueDefault:e.categorySelected}),t(C,{name:"textNote",ref:u,value:e.text}),r("div",{className:"modify-buttons",children:[t("button",{children:"Save"}),t("button",{type:"button",onClick:S,className:"red",title:"Reset to the last saved content",children:"Discard changes"})]})]}),t("button",{className:"close-btn",onClick:f,children:"\xD7"})]})})}function Y(e){const n=c.exports.useRef(null),o=c.exports.useContext(N);function l(){n.current.classList.add("anim-line-down-del"),setTimeout(e.closeDeleteForm,350)}function i(){o.deleteNoteById(e.id),n.current.classList.add("anim-line-down-del"),setTimeout(e.closeDeleteForm,350)}return t("div",{className:"backdrop",onClick:l,children:r("div",{className:"delete-form",ref:n,onClick:a=>a.stopPropagation(),children:[t("button",{className:"close-btn",onClick:l,children:"\xD7"}),t("h2",{children:"Do you really want to delete this note ?"}),r("div",{children:[t("button",{className:"del-btn",onClick:i,children:"Yes"}),t("button",{className:"del-btn btn-no",onClick:l,children:"No"})]})]})})}const j=(e,n)=>{switch(n.type){case 0:return;case 1:return n.item&&n.closeEditMode&&t(P,{note:n.item,closeEditMode:n.closeEditMode});case 2:return n.item&&n.closeEditMode&&t(Y,{closeDeleteForm:n.closeEditMode,id:n.item.id})}};function A(){const[e,n]=c.exports.useReducer(j,void 0),o=T(c.exports.useContext(N).getNotes());function l(s){n({type:1,item:s,closeEditMode:a})}function i(s){n({type:2,item:s,closeEditMode:a})}function a(){n({type:0})}const d=o.map((s,u)=>t(_,{title:s.title,categorySelected:s.categorySelected,text:s.text,modifyItem:()=>{l(s)},deleteItem:()=>{i(s)}},u));return r("div",{className:"edit-note-container",children:[e,t("h2",{children:o.length===0?"You have no notes to edit .":o.length===1?"You have only 1 note .":"You have "+o.length.toString()+" notes that can be modified ."}),o.length>0&&t("div",{className:"notes-container",children:d})]})}const U=[{noteState:m.viewNotes,component:t(L,{})},{noteState:m.createNote,component:t(E,{})},{noteState:m.editNote,component:t(A,{})}];function O({currentStatus:e}){const n=U.filter(o=>o.noteState===e)[0];return t("section",{className:"note-box",children:n.component})}function H(){const[e,n]=c.exports.useState({navNotesState:m.viewNotes});function o(l){n(i=>({...i,navNotesState:l}))}return r("section",{className:"note-container",children:[t(R,{initialNavState:e.navNotesState,setNavNotesState:o}),e.navNotesState!==m.none&&t(O,{currentStatus:e.navNotesState})]})}export{H as default};
