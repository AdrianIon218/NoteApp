import{r as l,j as t,u as S,a as E,b as p,c as i,R as F,F as k}from"./index.e962bf88.js";import{T as I}from"./TextArea.2c7fa5a4.js";import{I as T}from"./InputText.eba21b12.js";import{S as w,P as R}from"./PanelWithBackdrop.4e3234f8.js";var y=(e=>(e[e.viewNotes=0]="viewNotes",e[e.createNote=1]="createNote",e[e.editNote=2]="editNote",e))(y||{});const O=[{btnValue:0,navTitle:"My Notes"},{btnValue:1,navTitle:"New Note"},{btnValue:2,navTitle:"Edit Note"}];function H(e){const[n,o]=l.exports.useState(()=>e.initialNavState),a=l.exports.useId();function r(s){const{currentTarget:u}=s,h=+u.name;n!==h&&(e.setNavNotesState(h),o(h))}const c=O.map((s,u)=>t("button",{className:n===s.btnValue?"note-nav__selected":"",name:s.btnValue.toString(),onClick:r,children:s.navTitle},`${a}-${u}`));return t("section",{className:"note-nav",children:c})}let M=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,o)=>(o&=63,o<36?n+=o.toString(36):o<62?n+=(o-26).toString(36).toUpperCase():o>62?n+="-":n+="_",n),"");function V(){const e=S(),n=E(),o=p().getCategories(),a=l.exports.useRef(null),[r,c]=l.exports.useState("none"),s=l.exports.useRef(null),[u,h]=l.exports.useState(""),g=l.exports.useRef(null),[f,N]=l.exports.useState("");function d(){var m;h(""),s.current.value="",N(""),g.current.value="",c("none"),(m=a.current)==null||m.resetSelectValue()}function x(m){m.preventDefault();const C={title:u,category:r,text:f,id:M()};n.showNotification("Note added !"),e.addNote(C),d()}return i("div",{className:"create-note-container",children:[t("h1",{children:"Create a note"}),i("form",{onSubmit:x,children:[t(T,{ref:s,text:"Title",customText:"Insert a title between 3 and 30 characters",minLength:3,maxLength:30,onChangeHandler:h}),i("div",{className:"field",children:["Choose a category"," ",t(w,{options:o,onSelection:m=>{c(m)},ref:a})]}),t(I,{name:"textNote",ref:g,onChangeHandler:N}),i("div",{className:"field-group-btns",children:[t("button",{type:"submit",className:"btn-blue",disabled:u.length<3,children:"Save"}),t("button",{type:"button",className:"btn-blue red",onClick:d,disabled:u.length===0&&r==="none"&&f==="",children:"Discard"})]})]})]})}function P(e){const{title:n,category:o,text:a}=e.note,r=a.split(`
`).map((c,s)=>i(F.Fragment,{children:[c,t("br",{})]},s));return i(R,{closePanel:e.closeNote,plusClass:"panel-max-extended",children:[(o!=null?o:o!=="")?t("label",{className:"category-label",children:o}):null,t("h2",{title:n,children:n}),t("div",{className:"note-text",children:r})]})}function Y(e){const[n,o]=l.exports.useState(!1);function a(){o(!0)}function r(){o(!1)}return i(k,{children:[n&&t(P,{note:e,closeNote:r}),i("div",{className:"note-item",onClick:a,children:[t("h2",{title:e.title,children:e.title}),e.category!=="none"&&e.category.length>0&&t("label",{children:e.category}),t("div",{children:e.text.split(`
`)[0]})]})]})}function B(e,n){const o=e.category==="none"?"":e.category,a=n.category==="none"?"":n.category;return o>a?1:o<a?-1:e.title>n.title?1:e.title<n.title?-1:0}function L(e){return e.sort(B)}function _(){const e=L(S().getNotes()),n=p().getCategories(),[o,a]=l.exports.useState("all"),r=e.filter(s=>o==="all"||s.category===o).map(s=>t(Y,{id:s.id,title:s.title,text:s.text,category:s.category},s.id)),c=r.length;return i("div",{className:"view-notes",children:[e.length>0&&i("h3",{children:[t("span",{children:"Select a category\xA0"}),t(w,{options:["all",...n],onSelection:s=>{a(s)}})]}),t("h1",{children:c===0?o==="all"?"You don't have any notes!":"You don't have any notes of this category!":c===1?"You have only 1 note!":`You have ${c} notes!`}),c>0&&t("div",{className:"view-notes__container",children:r})]})}function j(e){var n,o;return i("div",{className:"note-item-edit",children:[e.numOfFirstLetersToHighlight?i("h2",{title:e.title,children:[t("span",{className:"text-highlighted",children:(n=e.title)==null?void 0:n.slice(0,e.numOfFirstLetersToHighlight)}),(o=e.title)==null?void 0:o.slice(e.numOfFirstLetersToHighlight)]}):t("h2",{title:e.title,children:e.title}),e.category!=="none"&&t("label",{children:e.category}),t("div",{className:"edit-btn",onClick:()=>e.modifyItem(),children:t("button",{children:"edit"})}),t("div",{className:"edit-btn",onClick:()=>e.deleteItem(),children:t("button",{className:"delete",children:"delete"})})]})}function A({note:e,closeEditMode:n}){const o=E(),a=S(),r=p().getCategories(),c=l.exports.useRef(null),[s,u]=l.exports.useState(e.category),h=l.exports.useRef(null),[g,f]=l.exports.useState(e.title),N=l.exports.useRef(null),[d,x]=l.exports.useState(e.text),m=g!==e.title||s!==e.category||d!==e.text;function C(v){v.preventDefault();const b={title:h.current.value,category:s,text:N.current.value,id:e.id};(b.title!==e.title||b.category!==e.category||b.text!==e.text)&&(a.modifyNote(b),o.showNotification("Note changed !"))}function D(){var v;h.current.value=e.title,f(e.title),N.current.value=e.text,x(e.text),(v=c.current)==null||v.resetSelectValue(),u(e.category)}return i(R,{closePanel:n,plusClass:"panel-max-extended",children:[t("h2",{children:"Edit note "}),i("form",{onSubmit:C,children:[t(T,{ref:h,text:"Title",customText:"The title must be between 3 and 30 characters !",minLength:3,maxLength:30,value:e.title,onChangeHandler:f}),i("div",{className:"field",children:["Change the category",t(w,{options:r,defaultOption:e.category,onSelection:v=>{u(v)},ref:c})]}),t(I,{name:"textNote",ref:N,value:e.text,onChangeHandler:x}),i("div",{className:"field-group-btns",children:[t("button",{className:"btn-blue",disabled:!m,children:"Save"}),t("button",{type:"button",onClick:D,className:"btn-blue red",title:"Reset to the last saved content",disabled:!m,children:"Discard changes"})]})]})]})}function W(e){const n=S(),o=l.exports.useRef(null);function a(){var c;(c=o.current)==null||c.closeBackdrop()}function r(){n.deleteNoteById(e.id),a()}return i(R,{closePanel:e.closeDeleteForm,plusClass:"panel-mind-extended",ref:o,children:[t("h1",{children:"Do you really want to delete this note?"}),i("div",{children:[t("button",{className:"confirmation-btn",onClick:r,children:"Yes"}),t("button",{className:"confirmation-btn btn-no",onClick:a,children:"No"})]})]})}const $=(e,n)=>{switch(n.type){case 0:return;case 1:return n.item&&n.closeEditMode&&t(A,{note:n.item,closeEditMode:n.closeEditMode});case 2:return n.item&&n.closeEditMode&&t(W,{closeDeleteForm:n.closeEditMode,id:n.item.id})}};function U(){const[e,n]=l.exports.useReducer($,void 0),o=L(S().getNotes()),a=o.length,[r,c]=l.exports.useState(""),s=r.length;function u(d){n({type:1,item:d,closeEditMode:g})}function h(d){n({type:2,item:d,closeEditMode:g})}function g(){n({type:0})}const f=r.toLowerCase(),N=o.filter(d=>d.title.toLowerCase().startsWith(f)).map((d,x)=>t(j,{title:d.title,numOfFirstLetersToHighlight:s,category:d.category,text:d.text,modifyItem:()=>{u(d)},deleteItem:()=>{h(d)}},x));return i("div",{className:"edit-note-container",children:[e,a===0&&t("h2",{children:"You don't have any notes to edit!"}),a>3&&t(T,{required:!1,text:"Search the note by name",onChangeHandler:d=>{c(d)}}),N.length>0&&t("div",{className:"notes-container",children:N}),N.length===0&&s>0&&t("h2",{children:"You don't have any note with this name!"})]})}const q=[{noteState:y.viewNotes,component:t(_,{})},{noteState:y.createNote,component:t(V,{})},{noteState:y.editNote,component:t(U,{})}];function z({currentStatus:e}){const n=q.filter(o=>o.noteState===e)[0];return t("section",{className:"note-box",children:n.component})}function X(){const[e,n]=l.exports.useState({navNotesState:y.viewNotes});function o(a){n({navNotesState:a})}return i("section",{className:"note-container",children:[t(H,{initialNavState:e.navNotesState,setNavNotesState:o}),t(z,{currentStatus:e.navNotesState})]})}export{X as default};
